
Google | Ajax killer (test)



*#@*#@*#@*#@*#@*#@*#@*#【 OUT OF DATE 】@*#@*#@*#@*#@*#@*#@*#@*#

このフィルタは、Google側の仕様変更により、恒久的に使用不可能となりました。
今後のサポートはありません。

なお、Ajaxの無効化自体は「UserAgentを架空の物に偽装する」ことで依然可能です。
UAの変更はブラウザ拡張など様々な手段で可能ですので、お好みの方法をご用意ください。

ProxomitronでUA偽装をする場合は、以下のようなヘッダフィルタを用います。

[HTTP headers]
In = FALSE
Out = TRUE
Key = "User-Agent: Unknown UA for Google (out) "
URL = "www.google.co(m|.jp)/search\?"
Match = "*"
Replace = "Proxomitron"

なお、このフィルタはあくまで例示であり、このフィルタ/UAの使用を推奨・強制したり、
またこれをデファクトスタンダード化しようというような意志は一切ありません。
このUAやフィルタに依存したフィルタを書くことはお控えください。

*#@*#@*#@*#@*#@*#@*#@*#【 OUT OF DATE 】@*#@*#@*#@*#@*#@*#@*#@*#




【概要】
Googleの検索ページでのAjax動作を防止します。
Ajaxで動作するためにProxomitronフィルタが適用できない問題を解決します。

【動作】
・Ajax版の検索ページを開いた際、非Ajax化URLオプション &tbo=1 を付加した非Ajax版ページへ
　自動的にリダイレクトを行います。
・サイドバーやヘッダから検索モードを変更するとAjax化してしまうため、該当リンクを
　非Ajax版ページへのリンクに書き換えます。この動作のために、サイドバーを強制的に
　オープンするURLオプション &prmdo=1 を付加してリダイレクトを行います。 
・Ajax用jsが一度でも読み込まれてしまうとURLオプションが恒久的に無効化されるため、
　該当jsの読み込みとキャッシュを事前に防止します。

【導入】
1. フィルタをインポートする

【注意】
・仕様上、検索ページを開くたびに2回のリダイレクトが発生することになります。
　javascriptによるリダイレクトを避けたい場合には、ヘッダフィルタなりなんなりで
　各自アレしてください的なアレ。
・リアルタイム検索のページでは正常に動作しません(バグ)。
　リアルタイム検索のサイドバー/ヘッダのリンクを踏むとAjax版に飛んでしまいます。
　…が、偶然にもGoogleリアルタイム検索はサービス終了したので関係なくなりました。
